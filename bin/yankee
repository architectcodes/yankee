#! /usr/bin/env node

const commander = require('commander');

const list = (value) => value.split(',');

const program = commander
  .description(
`We’ll release the current npm package based on the contents of the file
\`Changelog.yaml\`.

Make sure the changelog is a YAML object with the top-level property
\`master:\`. If that property contains the key \`breaking changes:\`, we’ll
make it a major release (X.y.z). If it contains the key \`new features:\`,
we’ll make a minor bump (x.Y.z). If it contains the property
\`notes: "Initial release"\`, we’ll release it as 1.0.0. Otherwise, make sure
your \`master:\` changelog has the key \`fixed bugs:\` – we’ll release it
as a patch (x.y.Z).
`
  )
  .option('-c, --commit',
    'Create a commit'
  )
  .option('-m, --message <message>',
    'Commit message (default: “Release %s”)'
  )
  .option('-t, --tag',
    'Tag the repo (implies --commit)'
  )
  .option('-p, --publish',
    'Publish the package on npm'
  )
  .option('-P, --push [remotes]',
    'Git-push to the specified remotes (comma-separated, default: origin)',
    list
  )
  .parse(process.argv);
